<!DOCTYPE HTML>
<html>
<head>
    <meta charset="UTF-8">
    <link rel="stylesheet" href="http://localhost/main.css">
    <link rel="icon" href="https://www.rust-lang.org/static/images/favicon-16x16.png">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1">
    <title> Rust Programming Course! | Struct Update Syntax </title>
</head>
<body>

<main>
    
    <nav>
            <a href="http:&#x2F;&#x2F;localhost">
                        <img src="https://www.rust-lang.org/static/images/rust-logo-blk.svg" alt="logo"/>
                    </a>
                <!-- -->

            <a href="javascript:void(0);" onclick="burger()" id="mobile" class="ms-Icon--GlobalNavButton"></a>
            <div id="trees">
                <input class="tree-toggle" type="checkbox" id="day-1-introduction"
                           />
                    <label class="tree-toggle-label"
                           for="day-1-introduction">Day 1: Introduction</label>

                    <ul class="subtree">
                        <li >
                                <a href="http://localhost/day 1/chapter-1/">What is Rust and why use it?</a>
                            </li>

                            <li >
                                <a href="http://localhost/day 1/chapter-2/">Installing Rust Toolchain (rustup, cargo)</a>
                            </li>

                            <li >
                                <a href="http://localhost/day 1/chapter-3/">Setting up Development (VS Code + Hello World)</a>
                            </li>

                            <li >
                                <a href="http://localhost/day 1/chapter-4/">Understanding Cargo Project Structure</a>
                            </li>

                            </ul>
                <input class="tree-toggle" type="checkbox" id="day-2-basic-syntax-variables"
                           />
                    <label class="tree-toggle-label"
                           for="day-2-basic-syntax-variables">Day 2: Basic Syntax &amp; Variables</label>

                    <ul class="subtree">
                        <li >
                                <a href="http://localhost/day 2/chapter-1/">Variables and Mutability in Rust</a>
                            </li>

                            <li >
                                <a href="http://localhost/day 2/chapter-2/">Data Types in Rust: Integers, Floats, Booleans, and Characters</a>
                            </li>

                            <li >
                                <a href="http://localhost/day 2/chapter-3/">Constants vs Variables</a>
                            </li>

                            <li >
                                <a href="http://localhost/day 2/chapter-4/">Understanding Shadowing in Rust: A Practical Guide</a>
                            </li>

                            <li >
                                <a href="http://localhost/day 2/chapter-5/">Basic Input&#x2F;Output</a>
                            </li>

                            </ul>
                <input class="tree-toggle" type="checkbox" id="day-3-functions-control-flow"
                           />
                    <label class="tree-toggle-label"
                           for="day-3-functions-control-flow">Day 3: Functions &amp; Control Flow</label>

                    <ul class="subtree">
                        <li >
                                <a href="http://localhost/day 3/chapter-1/">Function Syntax and Parameters in Rust</a>
                            </li>

                            <li >
                                <a href="http://localhost/day 3/chapter-2/">Return Values and Expressions vs Statements</a>
                            </li>

                            <li >
                                <a href="http://localhost/day 3/chapter-3/">If&#x2F;Else Statements in Rust</a>
                            </li>

                            <li >
                                <a href="http://localhost/day 3/chapter-4/">Match Expressions in Rust: Powerful Pattern Matching</a>
                            </li>

                            <li >
                                <a href="http://localhost/day 3/chapter-5/">Loops in Rust: loop, while, for Explained</a>
                            </li>

                            </ul>
                <input class="tree-toggle" type="checkbox" id="day-4-data-types-deep-dive"
                           />
                    <label class="tree-toggle-label"
                           for="day-4-data-types-deep-dive">Day 4: Data Types Deep Dive</label>

                    <ul class="subtree">
                        <li >
                                <a href="http://localhost/day 4/chapter-1/">Compound Types (Tuples, Arrays)</a>
                            </li>

                            <li >
                                <a href="http://localhost/day 4/chapter-2/">String vs &amp;str in Rust</a>
                            </li>

                            <li >
                                <a href="http://localhost/day 4/chapter-3/">Vector Basics in Rust</a>
                            </li>

                            <li >
                                <a href="http://localhost/day 4/chapter-4/">Type Annotations and Inference in Rust</a>
                            </li>

                            <li >
                                <a href="http://localhost/day 4/chapter-5/">Practical Rust Exercises</a>
                            </li>

                            </ul>
                <input class="tree-toggle" type="checkbox" id="day-5-practice-review"
                           />
                    <label class="tree-toggle-label"
                           for="day-5-practice-review">Day 5: Practice &amp; Review</label>

                    <ul class="subtree">
                        <li >
                                <a href="http://localhost/day 5/chapter-1/">Day 5: Practice &amp; Review</a>
                            </li>

                            </ul>
                <input class="tree-toggle" type="checkbox" id="day-6-ownership-fundamentals"
                           />
                    <label class="tree-toggle-label"
                           for="day-6-ownership-fundamentals">Day 6: Ownership Fundamentals</label>

                    <ul class="subtree">
                        <li >
                                <a href="http://localhost/day 6/chapter-1/">Ownership in Rust: A Detailed Guide</a>
                            </li>

                            <li >
                                <a href="http://localhost/day 6/chapter-2/">Stack vs Heap in Rust</a>
                            </li>

                            <li >
                                <a href="http://localhost/day 6/chapter-3/">Understanding Ownership in Rust</a>
                            </li>

                            <li >
                                <a href="http://localhost/day 6/chapter-4/">Move Semantics in Rust</a>
                            </li>

                            <li >
                                <a href="http://localhost/day 6/chapter-5/">Copy Trait in Rust</a>
                            </li>

                            </ul>
                <input class="tree-toggle" type="checkbox" id="day-7-references-borrowing"
                           />
                    <label class="tree-toggle-label"
                           for="day-7-references-borrowing">Day 7: References &amp; Borrowing</label>

                    <ul class="subtree">
                        <li >
                                <a href="http://localhost/day 7/chapter-1/">Immutable References</a>
                            </li>

                            <li >
                                <a href="http://localhost/day 7/chapter-2/">Mutable References</a>
                            </li>

                            <li >
                                <a href="http://localhost/day 7/chapter-3/">Borrowing Rules</a>
                            </li>

                            <li >
                                <a href="http://localhost/day 7/chapter-4/">Reference Lifetime Basics</a>
                            </li>

                            <li >
                                <a href="http://localhost/day 7/chapter-5/">Common Borrowing Errors and Solutions</a>
                            </li>

                            </ul>
                <input class="tree-toggle" type="checkbox" id="day-8-slices"
                           />
                    <label class="tree-toggle-label"
                           for="day-8-slices">Day 8: Slices</label>

                    <ul class="subtree">
                        <li >
                                <a href="http://localhost/day 8/chapter-1/">String Slices</a>
                            </li>

                            <li >
                                <a href="http://localhost/day 8/chapter-2/">Array Slices</a>
                            </li>

                            <li >
                                <a href="http://localhost/day 8/chapter-3/">Slice Syntax and Usage</a>
                            </li>

                            <li >
                                <a href="http://localhost/day 8/chapter-4/">Practical Applications</a>
                            </li>

                            <li >
                                <a href="http://localhost/day 8/chapter-5/">Memory Safety Benefits</a>
                            </li>

                            </ul>
                <input class="tree-toggle" type="checkbox" id="day-9-advanced-ownership"
                           />
                    <label class="tree-toggle-label"
                           for="day-9-advanced-ownership">Day 9: Advanced Ownership</label>

                    <ul class="subtree">
                        <li >
                                <a href="http://localhost/day 9/chapter-1/">Clone Trait</a>
                            </li>

                            <li >
                                <a href="http://localhost/day 9/chapter-2/">Drop Trait</a>
                            </li>

                            <li >
                                <a href="http://localhost/day 9/chapter-3/">RAII Pattern</a>
                            </li>

                            <li >
                                <a href="http://localhost/day 9/chapter-4/">Memory Management Comparison with Other Languages</a>
                            </li>

                            <li >
                                <a href="http://localhost/day 9/chapter-5/">Best Practices (Advanced Ownership)</a>
                            </li>

                            </ul>
                <input class="tree-toggle" type="checkbox" id="day-10-ownership-practice"
                           />
                    <label class="tree-toggle-label"
                           for="day-10-ownership-practice">Day 10: Ownership Practice</label>

                    <ul class="subtree">
                        <li >
                                <a href="http://localhost/day 10/chapter-1/">Complex Ownership Scenarios</a>
                            </li>

                            <li >
                                <a href="http://localhost/day 10/chapter-2/">Debugging Ownership Errors</a>
                            </li>

                            <li >
                                <a href="http://localhost/day 10/chapter-3/">Code Refactoring Exercises</a>
                            </li>

                            <li >
                                <a href="http://localhost/day 10/chapter-4/">Group Problem-Solving</a>
                            </li>

                            </ul>
                <input class="tree-toggle" type="checkbox" id="day-11-structs-basics"
                           checked/>
                    <label class="tree-toggle-label"
                           for="day-11-structs-basics">Day 11: Structs Basics</label>

                    <ul class="subtree">
                        <li >
                                <a href="http://localhost/day 11/chapter-1/">Defining and Instantiating Structs</a>
                            </li>

                            <li >
                                <a href="http://localhost/day 11/chapter-2/">Field Access and Modification</a>
                            </li>

                            <li >
                                <a href="http://localhost/day 11/chapter-3/">Tuple Structs and Unit Structs</a>
                            </li>

                            <li class="active">
                                <a href="http://localhost/day 11/chapter-4/">Struct Update Syntax</a>
                            </li>

                            
                                    
                                    
                                        <ul id="toc">
                                            <li><a href="
                                                        http://localhost/day 11/chapter-4/#struct-update-syntax-in-rust-comprehensive-documentation">Struct Update Syntax in Rust: Comprehensive Documentation</a>
                                                    <ul>
                                                            <li>
                                                                    <a href="http://localhost/day 11/chapter-4/#what-is-struct-update-syntax">What is Struct Update Syntax?</a>
                                                                </li>
                                                            <li>
                                                                    <a href="http://localhost/day 11/chapter-4/#basic-usage-examples">Basic Usage Examples</a>
                                                                </li>
                                                            <li>
                                                                    <a href="http://localhost/day 11/chapter-4/#ownership-semantics-and-move-behavior">Ownership Semantics and Move Behavior</a>
                                                                </li>
                                                            <li>
                                                                    <a href="http://localhost/day 11/chapter-4/#working-with-the-default-trait">Working with the Default Trait</a>
                                                                </li>
                                                            <li>
                                                                    <a href="http://localhost/day 11/chapter-4/#advanced-patterns-and-use-cases">Advanced Patterns and Use Cases</a>
                                                                </li>
                                                            <li>
                                                                    <a href="http://localhost/day 11/chapter-4/#type-changing-struct-updates">Type-Changing Struct Updates</a>
                                                                </li>
                                                            <li>
                                                                    <a href="http://localhost/day 11/chapter-4/#tuple-struct-updates">Tuple Struct Updates</a>
                                                                </li>
                                                            <li>
                                                                    <a href="http://localhost/day 11/chapter-4/#limitations-and-considerations">Limitations and Considerations</a>
                                                                </li>
                                                            <li>
                                                                    <a href="http://localhost/day 11/chapter-4/#best-practices">Best Practices</a>
                                                                </li>
                                                            <li>
                                                                    <a href="http://localhost/day 11/chapter-4/#summary-and-key-points">Summary and Key Points</a>
                                                                </li>
                                                            </ul>
                                                    </li>
                                            </ul>
                                    <li >
                                <a href="http://localhost/day 11/chapter-5/">Ownership of Struct Data</a>
                            </li>

                            </ul>
                <input class="tree-toggle" type="checkbox" id="day-12-methods-associated-functions"
                           />
                    <label class="tree-toggle-label"
                           for="day-12-methods-associated-functions">Day 12: Methods &amp; Associated Functions</label>

                    <ul class="subtree">
                        <li >
                                <a href="http://localhost/day 12/chapter-1/">Implementing Methods with impl Blocks</a>
                            </li>

                            <li >
                                <a href="http://localhost/day 12/chapter-2/">&amp;self, &amp;mut self, and self</a>
                            </li>

                            <li >
                                <a href="http://localhost/day 12/chapter-3/">Associated Functions (like Constructors)</a>
                            </li>

                            <li >
                                <a href="http://localhost/day 12/chapter-4/">Multiple impl Blocks</a>
                            </li>

                            <li >
                                <a href="http://localhost/day 12/chapter-5/">Method Chaining</a>
                            </li>

                            </ul>
                <input class="tree-toggle" type="checkbox" id="day-13-advanced-struct-concepts"
                           />
                    <label class="tree-toggle-label"
                           for="day-13-advanced-struct-concepts">Day 13: Advanced Struct Concepts</label>

                    <ul class="subtree">
                        <li >
                                <a href="http://localhost/day 13/chapter-1/">Struct Lifetime Parameters</a>
                            </li>

                            <li >
                                <a href="http://localhost/day 13/chapter-2/">Debug Trait and Custom Formatting</a>
                            </li>

                            <li >
                                <a href="http://localhost/day 13/chapter-3/">Builder Pattern Implementation</a>
                            </li>

                            <li >
                                <a href="http://localhost/day 13/chapter-4/">Struct Composition</a>
                            </li>

                            <li >
                                <a href="http://localhost/day 13/chapter-5/">Best Practices for Struct Design</a>
                            </li>

                            </ul>
                <input class="tree-toggle" type="checkbox" id="day-14-enums-pattern-matching"
                           />
                    <label class="tree-toggle-label"
                           for="day-14-enums-pattern-matching">Day 14: Enums &amp; Pattern Matching</label>

                    <ul class="subtree">
                        <li >
                                <a href="http://localhost/day 14/chapter-1/">Defining Enums</a>
                            </li>

                            <li >
                                <a href="http://localhost/day 14/chapter-2/">Enum Variants with Data</a>
                            </li>

                            <li >
                                <a href="http://localhost/day 14/chapter-3/">Option&lt;T&gt; Enum in Rust</a>
                            </li>

                            <li >
                                <a href="http://localhost/day 14/chapter-4/">Result&lt;T, E&gt; Enum in Rust</a>
                            </li>

                            <li >
                                <a href="http://localhost/day 14/chapter-5/">Advanced Match Patterns in Rust</a>
                            </li>

                            </ul>
                <input class="tree-toggle" type="checkbox" id="day-15-practice-project"
                           />
                    <label class="tree-toggle-label"
                           for="day-15-practice-project">Day 15: Practice Project</label>

                    <ul class="subtree">
                        <li >
                                <a href="http://localhost/day 15/chapter-1/">Building a Simple CLI Calculator in Rust</a>
                            </li>

                            </ul>
                <input class="tree-toggle" type="checkbox" id="day-16-vectors"
                           />
                    <label class="tree-toggle-label"
                           for="day-16-vectors">Day 16: Vectors</label>

                    <ul class="subtree">
                        <li >
                                <a href="http://localhost/day 16/chapter-1/">Creating and Updating Vectors</a>
                            </li>

                            <li >
                                <a href="http://localhost/day 16/chapter-2/">Vector Methods: push, pop, iter</a>
                            </li>

                            <li >
                                <a href="http://localhost/day 16/chapter-3/">Accessing Vector Elements Safely</a>
                            </li>

                            <li >
                                <a href="http://localhost/day 16/chapter-4/">Vector of Different Types with Enums</a>
                            </li>

                            <li >
                                <a href="http://localhost/day 16/chapter-5/">Performance Considerations</a>
                            </li>

                            </ul>
                <input class="tree-toggle" type="checkbox" id="day-17-hashmaps-other-collections"
                           />
                    <label class="tree-toggle-label"
                           for="day-17-hashmaps-other-collections">Day 17: HashMaps &amp; Other Collections</label>

                    <ul class="subtree">
                        <li >
                                <a href="http://localhost/day 17/chapter-1/">HashMap Creation and Manipulation</a>
                            </li>

                            <li >
                                <a href="http://localhost/day 17/chapter-2/">Keys and Values Ownership</a>
                            </li>

                            <li >
                                <a href="http://localhost/day 17/chapter-3/">HashMap Methods and Iteration</a>
                            </li>

                            <li >
                                <a href="http://localhost/day 17/chapter-4/">When to Use Different Collections</a>
                            </li>

                            <li >
                                <a href="http://localhost/day 17/chapter-5/">BTreeMap Introduction</a>
                            </li>

                            </ul>
                <input class="tree-toggle" type="checkbox" id="day-18-error-handling"
                           />
                    <label class="tree-toggle-label"
                           for="day-18-error-handling">Day 18: Error Handling</label>

                    <ul class="subtree">
                        <li >
                                <a href="http://localhost/day 18/chapter-1/">Panic! and When to Use It</a>
                            </li>

                            <li >
                                <a href="http://localhost/day 18/chapter-2/">Result&lt;T, E&gt; in Depth</a>
                            </li>

                            <li >
                                <a href="http://localhost/day 18/chapter-3/">The ? Operator in Rust</a>
                            </li>

                            <li >
                                <a href="http://localhost/day 18/chapter-4/">Creating Custom Error Types in Rust</a>
                            </li>

                            <li >
                                <a href="http://localhost/day 18/chapter-5/">Error Propagation Patterns in Rust</a>
                            </li>

                            </ul>
                <input class="tree-toggle" type="checkbox" id="day-19-strings-deep-dive"
                           />
                    <label class="tree-toggle-label"
                           for="day-19-strings-deep-dive">Day 19: Strings Deep Dive</label>

                    <ul class="subtree">
                        <li >
                                <a href="http://localhost/day 19/chapter-1/">String vs &amp;str Revisited</a>
                            </li>

                            <li >
                                <a href="http://localhost/day 19/chapter-2/">String Methods and Manipulation</a>
                            </li>

                            <li >
                                <a href="http://localhost/day 19/chapter-5/">Performance Considerations</a>
                            </li>

                            <li >
                                <a href="http://localhost/day 19/chapter-3/">UTF-8 and Character Encoding</a>
                            </li>

                            <li >
                                <a href="http://localhost/day 19/chapter-4/">String Concatenation Techniques</a>
                            </li>

                            </ul>
                <input class="tree-toggle" type="checkbox" id="day-20-mini-project"
                           />
                    <label class="tree-toggle-label"
                           for="day-20-mini-project">Day 20: Mini Project</label>

                    <ul class="subtree">
                        </ul>
                <input class="tree-toggle" type="checkbox" id="day-21-generic-functions-structs"
                           />
                    <label class="tree-toggle-label"
                           for="day-21-generic-functions-structs">Day 21: Generic Functions &amp; Structs</label>

                    <ul class="subtree">
                        <li >
                                <a href="http://localhost/day 21/chapter-1/">Generic Function Syntax</a>
                            </li>

                            <li >
                                <a href="http://localhost/day 21/chapter-2/">Generic Structs and Enums</a>
                            </li>

                            <li >
                                <a href="http://localhost/day 21/chapter-3/">Type Parameters and Constraints</a>
                            </li>

                            <li >
                                <a href="http://localhost/day 21/chapter-4/">Monomorphization Concept</a>
                            </li>

                            <li >
                                <a href="http://localhost/day 21/chapter-5/">Generic Collections</a>
                            </li>

                            </ul>
                </div>
        </nav>
    <article>

        <div id="on_right">
                <span id="search-ico" class="ms-Icon--Search"></span>
            </div>
            <div class="search-container">
                <input id="search" type="search" placeholder="Search as you type...">
                <div class="search-results">
                    <div class="search-results__header"></div>
                    <ul class="search-results__items"></ul>
                </div>
            </div>
        <div id="wrap">
            
        <h1 id="struct-update-syntax-in-rust-comprehensive-documentation">Struct Update Syntax in Rust: Comprehensive Documentation</h1>
<p>Struct update syntax is a powerful Rust feature that allows you to create new struct instances by copying most fields from existing instances while only specifying the fields you want to change. This feature provides an elegant way to create variations of existing structs without verbose field-by-field copying.</p>
<h2 id="what-is-struct-update-syntax">What is Struct Update Syntax?</h2>
<p><strong>Struct update syntax</strong> uses the <code>..</code> operator to specify that remaining fields (those not explicitly listed) should have the same values as the corresponding fields in a given instance[1]. This is also known as <strong>Functional Record Update (FRU)</strong> syntax[2].</p>
<h3 id="basic-syntax">Basic Syntax</h3>
<pre data-lang="rust" style="background-color:#eff1f5;color:#4f5b66;" class="language-rust "><code class="language-rust" data-lang="rust"><span>StructName {
</span><span>    field1: new_value1,
</span><span>    field2: new_value2,
</span><span>    ..existing_instance
</span><span>}
</span></code></pre>
<p>The <code>..existing_instance</code> must come <strong>last</strong> in the struct literal and specifies that any remaining fields should get their values from the corresponding fields in <code>existing_instance</code>[1].</p>
<h2 id="basic-usage-examples">Basic Usage Examples</h2>
<h3 id="simple-struct-update">Simple Struct Update</h3>
<pre data-lang="rust" style="background-color:#eff1f5;color:#4f5b66;" class="language-rust "><code class="language-rust" data-lang="rust"><span>#[</span><span style="color:#bf616a;">derive</span><span>(Debug)]
</span><span style="color:#b48ead;">struct </span><span>User {
</span><span>    </span><span style="color:#bf616a;">username</span><span>: String,
</span><span>    </span><span style="color:#bf616a;">email</span><span>: String,
</span><span>    </span><span style="color:#bf616a;">sign_in_count</span><span>: </span><span style="color:#b48ead;">u64</span><span>,
</span><span>    </span><span style="color:#bf616a;">active</span><span>: </span><span style="color:#b48ead;">bool</span><span>,
</span><span>}
</span><span>
</span><span style="color:#b48ead;">fn </span><span style="color:#8fa1b3;">main</span><span>() {
</span><span>    </span><span style="color:#b48ead;">let</span><span> user1 = User {
</span><span>        username: String::from(&quot;</span><span style="color:#a3be8c;">alice123</span><span>&quot;),
</span><span>        email: String::from(&quot;</span><span style="color:#a3be8c;">alice@example.com</span><span>&quot;),
</span><span>        sign_in_count: </span><span style="color:#d08770;">1</span><span>,
</span><span>        active: </span><span style="color:#d08770;">true</span><span>,
</span><span>    };
</span><span>
</span><span>    </span><span style="color:#a7adba;">// Create user2 with different email but same other fields
</span><span>    </span><span style="color:#b48ead;">let</span><span> user2 = User {
</span><span>        email: String::from(&quot;</span><span style="color:#a3be8c;">alice.work@company.com</span><span>&quot;),
</span><span>        ..user1  </span><span style="color:#a7adba;">// Copy remaining fields from user1
</span><span>    };
</span><span>
</span><span>    println!(&quot;</span><span style="color:#a3be8c;">User2: </span><span style="color:#d08770;">{:?}</span><span>&quot;, user2);
</span><span>}
</span></code></pre>
<h3 id="multiple-field-updates">Multiple Field Updates</h3>
<pre data-lang="rust" style="background-color:#eff1f5;color:#4f5b66;" class="language-rust "><code class="language-rust" data-lang="rust"><span style="color:#b48ead;">fn </span><span style="color:#8fa1b3;">main</span><span>() {
</span><span>    </span><span style="color:#b48ead;">let</span><span> user1 = User {
</span><span>        username: String::from(&quot;</span><span style="color:#a3be8c;">bob456</span><span>&quot;),
</span><span>        email: String::from(&quot;</span><span style="color:#a3be8c;">bob@example.com</span><span>&quot;),
</span><span>        sign_in_count: </span><span style="color:#d08770;">5</span><span>,
</span><span>        active: </span><span style="color:#d08770;">true</span><span>,
</span><span>    };
</span><span>
</span><span>    </span><span style="color:#a7adba;">// Update multiple fields while keeping others
</span><span>    </span><span style="color:#b48ead;">let</span><span> user2 = User {
</span><span>        username: String::from(&quot;</span><span style="color:#a3be8c;">bob_updated</span><span>&quot;),
</span><span>        sign_in_count: </span><span style="color:#d08770;">6</span><span>,
</span><span>        ..user1  </span><span style="color:#a7adba;">// Copy email and active from user1
</span><span>    };
</span><span>
</span><span>    println!(&quot;</span><span style="color:#a3be8c;">Updated user: </span><span style="color:#d08770;">{:?}</span><span>&quot;, user2);
</span><span>}
</span></code></pre>
<h2 id="ownership-semantics-and-move-behavior">Ownership Semantics and Move Behavior</h2>
<h3 id="the-critical-rule-struct-update-moves-data">The Critical Rule: Struct Update Moves Data</h3>
<p><strong>Important:</strong> Struct update syntax uses <code>=</code> like an assignment, which means it <strong>moves</strong> the data from the source struct[1]. This has significant implications for ownership:</p>
<pre data-lang="rust" style="background-color:#eff1f5;color:#4f5b66;" class="language-rust "><code class="language-rust" data-lang="rust"><span style="color:#b48ead;">fn </span><span style="color:#8fa1b3;">demonstrate_move_semantics</span><span>() {
</span><span>    </span><span style="color:#b48ead;">let</span><span> user1 = User {
</span><span>        username: String::from(&quot;</span><span style="color:#a3be8c;">charlie</span><span>&quot;),
</span><span>        email: String::from(&quot;</span><span style="color:#a3be8c;">charlie@example.com</span><span>&quot;),
</span><span>        sign_in_count: </span><span style="color:#d08770;">1</span><span>,
</span><span>        active: </span><span style="color:#d08770;">true</span><span>,
</span><span>    };
</span><span>
</span><span>    </span><span style="color:#b48ead;">let</span><span> user2 = User {
</span><span>        email: String::from(&quot;</span><span style="color:#a3be8c;">charlie.new@example.com</span><span>&quot;),
</span><span>        ..user1  </span><span style="color:#a7adba;">// Moves username from user1 to user2
</span><span>    };
</span><span>
</span><span>    </span><span style="color:#a7adba;">// Error! user1 is no longer accessible because username was moved
</span><span>    </span><span style="color:#a7adba;">// println!(&quot;Original user: {:?}&quot;, user1);  // Compile error!
</span><span>
</span><span>    println!(&quot;</span><span style="color:#a3be8c;">New user: </span><span style="color:#d08770;">{:?}</span><span>&quot;, user2);
</span><span>}
</span></code></pre>
<h3 id="when-the-original-struct-remains-valid">When the Original Struct Remains Valid</h3>
<p>The original struct remains usable <strong>only if</strong> all moved fields implement the <code>Copy</code> trait:</p>
<pre data-lang="rust" style="background-color:#eff1f5;color:#4f5b66;" class="language-rust "><code class="language-rust" data-lang="rust"><span>#[</span><span style="color:#bf616a;">derive</span><span>(Debug)]
</span><span style="color:#b48ead;">struct </span><span>Point {
</span><span>    </span><span style="color:#bf616a;">x</span><span>: </span><span style="color:#b48ead;">i32</span><span>,      </span><span style="color:#a7adba;">// Copy type
</span><span>    </span><span style="color:#bf616a;">y</span><span>: </span><span style="color:#b48ead;">i32</span><span>,      </span><span style="color:#a7adba;">// Copy type
</span><span>    </span><span style="color:#bf616a;">name</span><span>: String, </span><span style="color:#a7adba;">// Non-Copy type
</span><span>}
</span><span>
</span><span style="color:#b48ead;">fn </span><span style="color:#8fa1b3;">main</span><span>() {
</span><span>    </span><span style="color:#b48ead;">let</span><span> point1 = Point {
</span><span>        x: </span><span style="color:#d08770;">10</span><span>,
</span><span>        y: </span><span style="color:#d08770;">20</span><span>,
</span><span>        name: String::from(&quot;</span><span style="color:#a3be8c;">origin</span><span>&quot;),
</span><span>    };
</span><span>
</span><span>    </span><span style="color:#b48ead;">let</span><span> point2 = Point {
</span><span>        x: </span><span style="color:#d08770;">30</span><span>,
</span><span>        ..point1  </span><span style="color:#a7adba;">// Moves name, copies y
</span><span>    };
</span><span>
</span><span>    </span><span style="color:#a7adba;">// Error: Cannot use point1 because name was moved
</span><span>    </span><span style="color:#a7adba;">// println!(&quot;Original point: {:?}&quot;, point1);
</span><span>
</span><span>    </span><span style="color:#a7adba;">// However, we can still access individual Copy fields
</span><span>    println!(&quot;</span><span style="color:#a3be8c;">Original y coordinate: </span><span style="color:#d08770;">{}</span><span>&quot;, point1.y);  </span><span style="color:#a7adba;">// This works!
</span><span>}
</span></code></pre>
<h3 id="safe-usage-updating-only-copy-fields">Safe Usage: Updating Only Copy Fields</h3>
<pre data-lang="rust" style="background-color:#eff1f5;color:#4f5b66;" class="language-rust "><code class="language-rust" data-lang="rust"><span>#[</span><span style="color:#bf616a;">derive</span><span>(Debug)]
</span><span style="color:#b48ead;">struct </span><span>Configuration {
</span><span>    </span><span style="color:#bf616a;">host</span><span>: String,
</span><span>    </span><span style="color:#bf616a;">port</span><span>: </span><span style="color:#b48ead;">u16</span><span>,        </span><span style="color:#a7adba;">// Copy type
</span><span>    </span><span style="color:#bf616a;">timeout</span><span>: </span><span style="color:#b48ead;">u32</span><span>,     </span><span style="color:#a7adba;">// Copy type
</span><span>    </span><span style="color:#bf616a;">debug_mode</span><span>: </span><span style="color:#b48ead;">bool</span><span>, </span><span style="color:#a7adba;">// Copy type
</span><span>}
</span><span>
</span><span style="color:#b48ead;">fn </span><span style="color:#8fa1b3;">main</span><span>() {
</span><span>    </span><span style="color:#b48ead;">let</span><span> config1 = Configuration {
</span><span>        host: String::from(&quot;</span><span style="color:#a3be8c;">localhost</span><span>&quot;),
</span><span>        port: </span><span style="color:#d08770;">8080</span><span>,
</span><span>        timeout: </span><span style="color:#d08770;">30</span><span>,
</span><span>        debug_mode: </span><span style="color:#d08770;">false</span><span>,
</span><span>    };
</span><span>
</span><span>    </span><span style="color:#a7adba;">// Only update Copy fields - original remains valid
</span><span>    </span><span style="color:#b48ead;">let</span><span> config2 = Configuration {
</span><span>        host: String::from(&quot;</span><span style="color:#a3be8c;">production.server.com</span><span>&quot;), </span><span style="color:#a7adba;">// Provide new String
</span><span>        port: </span><span style="color:#d08770;">443</span><span>,    </span><span style="color:#a7adba;">// Update Copy field
</span><span>        ..config1     </span><span style="color:#a7adba;">// Copy timeout and debug_mode
</span><span>    };
</span><span>
</span><span>    </span><span style="color:#a7adba;">// config1 is still valid because we didn&#39;t move any non-Copy fields
</span><span>    println!(&quot;</span><span style="color:#a3be8c;">Original config still valid: </span><span style="color:#d08770;">{:?}</span><span>&quot;, config1);
</span><span>    println!(&quot;</span><span style="color:#a3be8c;">New config: </span><span style="color:#d08770;">{:?}</span><span>&quot;, config2);
</span><span>}
</span></code></pre>
<h2 id="working-with-the-default-trait">Working with the Default Trait</h2>
<h3 id="using-default-default">Using ..Default::default()</h3>
<p>One of the most common and powerful uses of struct update syntax is with the <code>Default</code> trait[3][4]:</p>
<pre data-lang="rust" style="background-color:#eff1f5;color:#4f5b66;" class="language-rust "><code class="language-rust" data-lang="rust"><span>#[</span><span style="color:#bf616a;">derive</span><span>(Debug, Default)]
</span><span style="color:#b48ead;">struct </span><span>ServerConfig {
</span><span>    </span><span style="color:#bf616a;">host</span><span>: String,          </span><span style="color:#a7adba;">// Default: empty string
</span><span>    </span><span style="color:#bf616a;">port</span><span>: </span><span style="color:#b48ead;">u16</span><span>,            </span><span style="color:#a7adba;">// Default: 0
</span><span>    </span><span style="color:#bf616a;">max_connections</span><span>: </span><span style="color:#b48ead;">u32</span><span>, </span><span style="color:#a7adba;">// Default: 0
</span><span>    </span><span style="color:#bf616a;">timeout_seconds</span><span>: </span><span style="color:#b48ead;">u32</span><span>, </span><span style="color:#a7adba;">// Default: 0
</span><span>    </span><span style="color:#bf616a;">debug_mode</span><span>: </span><span style="color:#b48ead;">bool</span><span>,     </span><span style="color:#a7adba;">// Default: false
</span><span>    </span><span style="color:#bf616a;">ssl_enabled</span><span>: </span><span style="color:#b48ead;">bool</span><span>,    </span><span style="color:#a7adba;">// Default: false
</span><span>}
</span><span>
</span><span style="color:#b48ead;">fn </span><span style="color:#8fa1b3;">main</span><span>() {
</span><span>    </span><span style="color:#a7adba;">// Create config with only specific fields, rest use defaults
</span><span>    </span><span style="color:#b48ead;">let</span><span> config = ServerConfig {
</span><span>        host: String::from(&quot;</span><span style="color:#a3be8c;">api.example.com</span><span>&quot;),
</span><span>        port: </span><span style="color:#d08770;">443</span><span>,
</span><span>        ssl_enabled: </span><span style="color:#d08770;">true</span><span>,
</span><span>        ..Default::default()  </span><span style="color:#a7adba;">// Use default values for other fields
</span><span>    };
</span><span>
</span><span>    println!(&quot;</span><span style="color:#a3be8c;">Config: </span><span style="color:#d08770;">{:#?}</span><span>&quot;, config);
</span><span>}
</span></code></pre>
<h3 id="custom-default-implementation">Custom Default Implementation</h3>
<pre data-lang="rust" style="background-color:#eff1f5;color:#4f5b66;" class="language-rust "><code class="language-rust" data-lang="rust"><span>#[</span><span style="color:#bf616a;">derive</span><span>(Debug)]
</span><span style="color:#b48ead;">struct </span><span>DatabaseConfig {
</span><span>    </span><span style="color:#bf616a;">host</span><span>: String,
</span><span>    </span><span style="color:#bf616a;">port</span><span>: </span><span style="color:#b48ead;">u16</span><span>,
</span><span>    </span><span style="color:#bf616a;">database</span><span>: String,
</span><span>    </span><span style="color:#bf616a;">pool_size</span><span>: </span><span style="color:#b48ead;">u32</span><span>,
</span><span>    </span><span style="color:#bf616a;">timeout_ms</span><span>: </span><span style="color:#b48ead;">u64</span><span>,
</span><span>}
</span><span>
</span><span style="color:#b48ead;">impl </span><span>Default </span><span style="color:#b48ead;">for </span><span>DatabaseConfig {
</span><span>    </span><span style="color:#b48ead;">fn </span><span style="color:#8fa1b3;">default</span><span>() -&gt; </span><span style="color:#b48ead;">Self </span><span>{
</span><span>        DatabaseConfig {
</span><span>            host: String::from(&quot;</span><span style="color:#a3be8c;">localhost</span><span>&quot;),
</span><span>            port: </span><span style="color:#d08770;">5432</span><span>,
</span><span>            database: String::from(&quot;</span><span style="color:#a3be8c;">default_db</span><span>&quot;),
</span><span>            pool_size: </span><span style="color:#d08770;">10</span><span>,
</span><span>            timeout_ms: </span><span style="color:#d08770;">5000</span><span>,
</span><span>        }
</span><span>    }
</span><span>}
</span><span>
</span><span style="color:#b48ead;">fn </span><span style="color:#8fa1b3;">main</span><span>() {
</span><span>    </span><span style="color:#a7adba;">// Use custom defaults with specific overrides
</span><span>    </span><span style="color:#b48ead;">let</span><span> config = DatabaseConfig {
</span><span>        database: String::from(&quot;</span><span style="color:#a3be8c;">production_db</span><span>&quot;),
</span><span>        pool_size: </span><span style="color:#d08770;">50</span><span>,
</span><span>        ..Default::default()
</span><span>    };
</span><span>
</span><span>    println!(&quot;</span><span style="color:#a3be8c;">Database config: </span><span style="color:#d08770;">{:#?}</span><span>&quot;, config);
</span><span>}
</span></code></pre>
<h2 id="advanced-patterns-and-use-cases">Advanced Patterns and Use Cases</h2>
<h3 id="builder-pattern-integration">Builder Pattern Integration</h3>
<p>Struct update syntax works well with builder patterns:</p>
<pre data-lang="rust" style="background-color:#eff1f5;color:#4f5b66;" class="language-rust "><code class="language-rust" data-lang="rust"><span>#[</span><span style="color:#bf616a;">derive</span><span>(Debug, Default)]
</span><span style="color:#b48ead;">struct </span><span>HttpRequest {
</span><span>    </span><span style="color:#bf616a;">method</span><span>: String,
</span><span>    </span><span style="color:#bf616a;">url</span><span>: String,
</span><span>    </span><span style="color:#bf616a;">headers</span><span>: Vec,
</span><span>    </span><span style="color:#bf616a;">timeout</span><span>: Option,
</span><span>    </span><span style="color:#bf616a;">follow_redirects</span><span>: </span><span style="color:#b48ead;">bool</span><span>,
</span><span>    </span><span style="color:#bf616a;">max_redirects</span><span>: </span><span style="color:#b48ead;">u32</span><span>,
</span><span>}
</span><span>
</span><span style="color:#b48ead;">impl </span><span>HttpRequest {
</span><span>    </span><span style="color:#b48ead;">fn </span><span style="color:#8fa1b3;">get</span><span>(</span><span style="color:#bf616a;">url</span><span>: &amp;</span><span style="color:#b48ead;">str</span><span>) -&gt; </span><span style="color:#b48ead;">Self </span><span>{
</span><span>        HttpRequest {
</span><span>            method: String::from(&quot;</span><span style="color:#a3be8c;">GET</span><span>&quot;),
</span><span>            url: url.</span><span style="color:#96b5b4;">to_string</span><span>(),
</span><span>            ..Default::default()
</span><span>        }
</span><span>    }
</span><span>
</span><span>    </span><span style="color:#b48ead;">fn </span><span style="color:#8fa1b3;">post</span><span>(</span><span style="color:#bf616a;">url</span><span>: &amp;</span><span style="color:#b48ead;">str</span><span>) -&gt; </span><span style="color:#b48ead;">Self </span><span>{
</span><span>        HttpRequest {
</span><span>            method: String::from(&quot;</span><span style="color:#a3be8c;">POST</span><span>&quot;),
</span><span>            url: url.</span><span style="color:#96b5b4;">to_string</span><span>(),
</span><span>            ..Default::default()
</span><span>        }
</span><span>    }
</span><span>
</span><span>    </span><span style="color:#b48ead;">fn </span><span style="color:#8fa1b3;">with_timeout</span><span>(</span><span style="color:#bf616a;">self</span><span>, </span><span style="color:#bf616a;">timeout</span><span>: </span><span style="color:#b48ead;">u32</span><span>) -&gt; </span><span style="color:#b48ead;">Self </span><span>{
</span><span>        HttpRequest {
</span><span>            timeout: Some(timeout),
</span><span>            ..</span><span style="color:#bf616a;">self
</span><span>        }
</span><span>    }
</span><span>
</span><span>    </span><span style="color:#b48ead;">fn </span><span style="color:#8fa1b3;">with_redirects</span><span>(</span><span style="color:#bf616a;">self</span><span>, </span><span style="color:#bf616a;">max_redirects</span><span>: </span><span style="color:#b48ead;">u32</span><span>) -&gt; </span><span style="color:#b48ead;">Self </span><span>{
</span><span>        HttpRequest {
</span><span>            follow_redirects: </span><span style="color:#d08770;">true</span><span>,
</span><span>            max_redirects,
</span><span>            ..</span><span style="color:#bf616a;">self
</span><span>        }
</span><span>    }
</span><span>}
</span><span>
</span><span style="color:#b48ead;">fn </span><span style="color:#8fa1b3;">main</span><span>() {
</span><span>    </span><span style="color:#b48ead;">let</span><span> request = HttpRequest::post(&quot;</span><span style="color:#a3be8c;">https://api.example.com/users</span><span>&quot;)
</span><span>        .</span><span style="color:#96b5b4;">with_timeout</span><span>(</span><span style="color:#d08770;">5000</span><span>)
</span><span>        .</span><span style="color:#96b5b4;">with_redirects</span><span>(</span><span style="color:#d08770;">3</span><span>);
</span><span>
</span><span>    println!(&quot;</span><span style="color:#a3be8c;">Request: </span><span style="color:#d08770;">{:#?}</span><span>&quot;, request);
</span><span>}
</span></code></pre>
<h3 id="configuration-templates">Configuration Templates</h3>
<p>Create configuration templates using struct update syntax:</p>
<pre data-lang="rust" style="background-color:#eff1f5;color:#4f5b66;" class="language-rust "><code class="language-rust" data-lang="rust"><span>#[</span><span style="color:#bf616a;">derive</span><span>(Debug, Clone)]
</span><span style="color:#b48ead;">struct </span><span>AppConfig {
</span><span>    </span><span style="color:#bf616a;">environment</span><span>: String,
</span><span>    </span><span style="color:#bf616a;">database_url</span><span>: String,
</span><span>    </span><span style="color:#bf616a;">redis_url</span><span>: String,
</span><span>    </span><span style="color:#bf616a;">log_level</span><span>: String,
</span><span>    </span><span style="color:#bf616a;">port</span><span>: </span><span style="color:#b48ead;">u16</span><span>,
</span><span>    </span><span style="color:#bf616a;">workers</span><span>: </span><span style="color:#b48ead;">u32</span><span>,
</span><span>    </span><span style="color:#bf616a;">debug</span><span>: </span><span style="color:#b48ead;">bool</span><span>,
</span><span>}
</span><span>
</span><span style="color:#b48ead;">impl </span><span>AppConfig {
</span><span>    </span><span style="color:#b48ead;">fn </span><span style="color:#8fa1b3;">development_template</span><span>() -&gt; </span><span style="color:#b48ead;">Self </span><span>{
</span><span>        AppConfig {
</span><span>            environment: String::from(&quot;</span><span style="color:#a3be8c;">development</span><span>&quot;),
</span><span>            database_url: String::from(&quot;</span><span style="color:#a3be8c;">postgres://localhost/myapp_dev</span><span>&quot;),
</span><span>            redis_url: String::from(&quot;</span><span style="color:#a3be8c;">redis://localhost:6379/0</span><span>&quot;),
</span><span>            log_level: String::from(&quot;</span><span style="color:#a3be8c;">debug</span><span>&quot;),
</span><span>            port: </span><span style="color:#d08770;">3000</span><span>,
</span><span>            workers: </span><span style="color:#d08770;">1</span><span>,
</span><span>            debug: </span><span style="color:#d08770;">true</span><span>,
</span><span>        }
</span><span>    }
</span><span>
</span><span>    </span><span style="color:#b48ead;">fn </span><span style="color:#8fa1b3;">production_template</span><span>() -&gt; </span><span style="color:#b48ead;">Self </span><span>{
</span><span>        AppConfig {
</span><span>            environment: String::from(&quot;</span><span style="color:#a3be8c;">production</span><span>&quot;),
</span><span>            log_level: String::from(&quot;</span><span style="color:#a3be8c;">info</span><span>&quot;),
</span><span>            port: </span><span style="color:#d08770;">8080</span><span>,
</span><span>            workers: </span><span style="color:#d08770;">4</span><span>,
</span><span>            debug: </span><span style="color:#d08770;">false</span><span>,
</span><span>            ..</span><span style="color:#b48ead;">Self</span><span>::development_template()  </span><span style="color:#a7adba;">// Use dev template as base
</span><span>        }
</span><span>    }
</span><span>
</span><span>    </span><span style="color:#b48ead;">fn </span><span style="color:#8fa1b3;">staging_from_prod</span><span>(</span><span style="color:#bf616a;">database_url</span><span>: String) -&gt; </span><span style="color:#b48ead;">Self </span><span>{
</span><span>        AppConfig {
</span><span>            environment: String::from(&quot;</span><span style="color:#a3be8c;">staging</span><span>&quot;),
</span><span>            database_url,
</span><span>            ..</span><span style="color:#b48ead;">Self</span><span>::production_template()  </span><span style="color:#a7adba;">// Use prod config as base
</span><span>        }
</span><span>    }
</span><span>}
</span><span>
</span><span style="color:#b48ead;">fn </span><span style="color:#8fa1b3;">main</span><span>() {
</span><span>    </span><span style="color:#b48ead;">let</span><span> dev_config = AppConfig::development_template();
</span><span>    </span><span style="color:#b48ead;">let</span><span> prod_config = AppConfig::production_template();
</span><span>    </span><span style="color:#b48ead;">let</span><span> staging_config = AppConfig::staging_from_prod(
</span><span>        String::from(&quot;</span><span style="color:#a3be8c;">postgres://staging-db/myapp_staging</span><span>&quot;)
</span><span>    );
</span><span>
</span><span>    println!(&quot;</span><span style="color:#a3be8c;">Development: </span><span style="color:#d08770;">{:#?}</span><span>&quot;, dev_config);
</span><span>    println!(&quot;</span><span style="color:#a3be8c;">Production: </span><span style="color:#d08770;">{:#?}</span><span>&quot;, prod_config);
</span><span>    println!(&quot;</span><span style="color:#a3be8c;">Staging: </span><span style="color:#d08770;">{:#?}</span><span>&quot;, staging_config);
</span><span>}
</span></code></pre>
<h2 id="type-changing-struct-updates">Type-Changing Struct Updates</h2>
<p>Rust also supports struct update syntax between instances of the same struct with different generic parameters, as long as compatible fields have the same types[5]:</p>
<pre data-lang="rust" style="background-color:#eff1f5;color:#4f5b66;" class="language-rust "><code class="language-rust" data-lang="rust"><span style="color:#b48ead;">use </span><span>std::marker::PhantomData;
</span><span>
</span><span style="color:#a7adba;">// Generic struct with state markers
</span><span style="color:#b48ead;">struct </span><span>Connection {
</span><span>    </span><span style="color:#bf616a;">host</span><span>: String,
</span><span>    </span><span style="color:#bf616a;">port</span><span>: </span><span style="color:#b48ead;">u16</span><span>,
</span><span>    </span><span style="color:#bf616a;">timeout</span><span>: </span><span style="color:#b48ead;">u32</span><span>,
</span><span>    </span><span style="color:#bf616a;">_state</span><span>: PhantomData,
</span><span>}
</span><span>
</span><span style="color:#b48ead;">struct </span><span>Connected;
</span><span style="color:#b48ead;">struct </span><span>Disconnected;
</span><span>
</span><span style="color:#b48ead;">impl </span><span>Connection {
</span><span>    </span><span style="color:#b48ead;">fn </span><span style="color:#8fa1b3;">new</span><span>(</span><span style="color:#bf616a;">host</span><span>: String, </span><span style="color:#bf616a;">port</span><span>: </span><span style="color:#b48ead;">u16</span><span>) -&gt; </span><span style="color:#b48ead;">Self </span><span>{
</span><span>        Connection {
</span><span>            host,
</span><span>            port,
</span><span>            timeout: </span><span style="color:#d08770;">5000</span><span>,
</span><span>            _state: PhantomData,
</span><span>        }
</span><span>    }
</span><span>
</span><span>    </span><span style="color:#b48ead;">fn </span><span style="color:#8fa1b3;">connect</span><span>(</span><span style="color:#bf616a;">self</span><span>) -&gt; Connection {
</span><span>        println!(&quot;</span><span style="color:#a3be8c;">Connecting to </span><span style="color:#d08770;">{}</span><span style="color:#a3be8c;">:</span><span style="color:#d08770;">{}</span><span>&quot;, </span><span style="color:#bf616a;">self</span><span>.host, </span><span style="color:#bf616a;">self</span><span>.port);
</span><span>
</span><span>        Connection {
</span><span>            _state: PhantomData,  </span><span style="color:#a7adba;">// Change the state
</span><span>            ..</span><span style="color:#bf616a;">self  </span><span style="color:#a7adba;">// Copy all compatible fields
</span><span>        }
</span><span>    }
</span><span>}
</span><span>
</span><span style="color:#b48ead;">impl </span><span>Connection {
</span><span>    </span><span style="color:#b48ead;">fn </span><span style="color:#8fa1b3;">execute_query</span><span>(&amp;</span><span style="color:#bf616a;">self</span><span>, </span><span style="color:#bf616a;">query</span><span>: &amp;</span><span style="color:#b48ead;">str</span><span>) {
</span><span>        println!(&quot;</span><span style="color:#a3be8c;">Executing query: </span><span style="color:#d08770;">{}</span><span>&quot;, query);
</span><span>    }
</span><span>
</span><span>    </span><span style="color:#b48ead;">fn </span><span style="color:#8fa1b3;">disconnect</span><span>(</span><span style="color:#bf616a;">self</span><span>) -&gt; Connection {
</span><span>        println!(&quot;</span><span style="color:#a3be8c;">Disconnecting from </span><span style="color:#d08770;">{}</span><span style="color:#a3be8c;">:</span><span style="color:#d08770;">{}</span><span>&quot;, </span><span style="color:#bf616a;">self</span><span>.host, </span><span style="color:#bf616a;">self</span><span>.port);
</span><span>
</span><span>        Connection {
</span><span>            _state: PhantomData,
</span><span>            ..</span><span style="color:#bf616a;">self
</span><span>        }
</span><span>    }
</span><span>}
</span><span>
</span><span style="color:#b48ead;">fn </span><span style="color:#8fa1b3;">main</span><span>() {
</span><span>    </span><span style="color:#b48ead;">let</span><span> disconnected_conn = Connection::new(
</span><span>        String::from(&quot;</span><span style="color:#a3be8c;">localhost</span><span>&quot;),
</span><span>        </span><span style="color:#d08770;">5432
</span><span>    );
</span><span>
</span><span>    </span><span style="color:#b48ead;">let</span><span> connected_conn = disconnected_conn.</span><span style="color:#96b5b4;">connect</span><span>();
</span><span>    connected_conn.</span><span style="color:#96b5b4;">execute_query</span><span>(&quot;</span><span style="color:#a3be8c;">SELECT * FROM users</span><span>&quot;);
</span><span>
</span><span>    </span><span style="color:#b48ead;">let</span><span> _disconnected_again = connected_conn.</span><span style="color:#96b5b4;">disconnect</span><span>();
</span><span>}
</span></code></pre>
<h2 id="tuple-struct-updates">Tuple Struct Updates</h2>
<p>Struct update syntax also works with tuple structs:</p>
<pre data-lang="rust" style="background-color:#eff1f5;color:#4f5b66;" class="language-rust "><code class="language-rust" data-lang="rust"><span>#[</span><span style="color:#bf616a;">derive</span><span>(Debug)]
</span><span style="color:#b48ead;">struct </span><span>Color(</span><span style="color:#b48ead;">u8</span><span>, </span><span style="color:#b48ead;">u8</span><span>, </span><span style="color:#b48ead;">u8</span><span>);
</span><span>
</span><span style="color:#b48ead;">fn </span><span style="color:#8fa1b3;">main</span><span>() {
</span><span>    </span><span style="color:#b48ead;">let</span><span> red = Color(</span><span style="color:#d08770;">255</span><span>, </span><span style="color:#d08770;">0</span><span>, </span><span style="color:#d08770;">0</span><span>);
</span><span>
</span><span>    </span><span style="color:#a7adba;">// Create variations using tuple struct update syntax
</span><span>    </span><span style="color:#b48ead;">let</span><span> pink = Color {
</span><span>        </span><span style="color:#d08770;">0</span><span>: </span><span style="color:#d08770;">255</span><span>,     </span><span style="color:#a7adba;">// Red component
</span><span>        </span><span style="color:#d08770;">1</span><span>: </span><span style="color:#d08770;">192</span><span>,     </span><span style="color:#a7adba;">// Green component
</span><span>        ..red       </span><span style="color:#a7adba;">// Copy blue component
</span><span>    };
</span><span>
</span><span>    println!(&quot;</span><span style="color:#a3be8c;">Original red: </span><span style="color:#d08770;">{:?}</span><span>&quot;, red);   </span><span style="color:#a7adba;">// Still valid (Copy type)
</span><span>    println!(&quot;</span><span style="color:#a3be8c;">Pink color: </span><span style="color:#d08770;">{:?}</span><span>&quot;, pink);
</span><span>}
</span></code></pre>
<h2 id="limitations-and-considerations">Limitations and Considerations</h2>
<h3 id="field-visibility-requirements">Field Visibility Requirements</h3>
<p>All fields involved in struct update must be <strong>publicly visible</strong> at the update location[2]:</p>
<pre data-lang="rust" style="background-color:#eff1f5;color:#4f5b66;" class="language-rust "><code class="language-rust" data-lang="rust"><span style="color:#b48ead;">mod </span><span>private_fields {
</span><span>    </span><span style="color:#b48ead;">pub struct </span><span>User {
</span><span>        </span><span style="color:#b48ead;">pub </span><span style="color:#bf616a;">username</span><span>: String,
</span><span>        </span><span style="color:#b48ead;">pub </span><span style="color:#bf616a;">email</span><span>: String,
</span><span>        </span><span style="color:#bf616a;">private_id</span><span>: </span><span style="color:#b48ead;">u64</span><span>,        </span><span style="color:#a7adba;">// Private field
</span><span>    }
</span><span>
</span><span>    </span><span style="color:#b48ead;">impl </span><span>User {
</span><span>        </span><span style="color:#b48ead;">pub fn </span><span style="color:#8fa1b3;">new</span><span>(</span><span style="color:#bf616a;">username</span><span>: String, </span><span style="color:#bf616a;">email</span><span>: String) -&gt; </span><span style="color:#b48ead;">Self </span><span>{
</span><span>            User {
</span><span>                username,
</span><span>                email,
</span><span>                private_id: </span><span style="color:#d08770;">12345</span><span>,
</span><span>            }
</span><span>        }
</span><span>    }
</span><span>}
</span><span>
</span><span style="color:#b48ead;">fn </span><span style="color:#8fa1b3;">main</span><span>() {
</span><span>    </span><span style="color:#b48ead;">use </span><span>private_fields::User;
</span><span>
</span><span>    </span><span style="color:#b48ead;">let</span><span> user1 = User::new(
</span><span>        String::from(&quot;</span><span style="color:#a3be8c;">alice</span><span>&quot;),
</span><span>        String::from(&quot;</span><span style="color:#a3be8c;">alice@example.com</span><span>&quot;)
</span><span>    );
</span><span>
</span><span>    </span><span style="color:#a7adba;">// This won&#39;t work because private_id is not accessible
</span><span>    </span><span style="color:#a7adba;">/*
</span><span style="color:#a7adba;">    let user2 = User {
</span><span style="color:#a7adba;">        username: String::from(&quot;bob&quot;),
</span><span style="color:#a7adba;">        ..user1  // Error: private_id is not accessible
</span><span style="color:#a7adba;">    };
</span><span style="color:#a7adba;">    */
</span><span>}
</span></code></pre>
<h3 id="performance-considerations">Performance Considerations</h3>
<p>Struct update syntax is a <strong>zero-cost abstraction</strong> - it compiles to the same code as explicitly listing all fields[2]:</p>
<pre data-lang="rust" style="background-color:#eff1f5;color:#4f5b66;" class="language-rust "><code class="language-rust" data-lang="rust"><span style="color:#a7adba;">// These are equivalent at compile time:
</span><span>
</span><span style="color:#a7adba;">// Using struct update syntax
</span><span style="color:#b48ead;">let</span><span> user2 = User {
</span><span>    email: String::from(&quot;</span><span style="color:#a3be8c;">new@example.com</span><span>&quot;),
</span><span>    ..user1
</span><span>};
</span><span>
</span><span style="color:#a7adba;">// Explicitly listing fields
</span><span style="color:#b48ead;">let</span><span> user2 = User {
</span><span>    email: String::from(&quot;</span><span style="color:#a3be8c;">new@example.com</span><span>&quot;),
</span><span>    username: user1.username,
</span><span>    sign_in_count: user1.sign_in_count,
</span><span>    active: user1.active,
</span><span>};
</span></code></pre>
<h2 id="best-practices">Best Practices</h2>
<h3 id="1-be-mindful-of-ownership">1. Be Mindful of Ownership</h3>
<p>Always consider which fields will be moved vs copied:</p>
<pre data-lang="rust" style="background-color:#eff1f5;color:#4f5b66;" class="language-rust "><code class="language-rust" data-lang="rust"><span>#[</span><span style="color:#bf616a;">derive</span><span>(Debug)]
</span><span style="color:#b48ead;">struct </span><span>Document {
</span><span>    </span><span style="color:#bf616a;">title</span><span>: String,      </span><span style="color:#a7adba;">// Will be moved
</span><span>    </span><span style="color:#bf616a;">content</span><span>: String,    </span><span style="color:#a7adba;">// Will be moved
</span><span>    </span><span style="color:#bf616a;">line_count</span><span>: </span><span style="color:#b48ead;">u32</span><span>,    </span><span style="color:#a7adba;">// Will be copied
</span><span>    </span><span style="color:#bf616a;">created_at</span><span>: </span><span style="color:#b48ead;">u64</span><span>,    </span><span style="color:#a7adba;">// Will be copied
</span><span>}
</span><span>
</span><span style="color:#b48ead;">fn </span><span style="color:#8fa1b3;">update_document_safely</span><span>(</span><span style="color:#bf616a;">doc</span><span>: Document) -&gt; Document {
</span><span>    </span><span style="color:#a7adba;">// Safe: we&#39;re consuming the original document
</span><span>    Document {
</span><span>        title: format!(&quot;</span><span style="color:#a3be8c;">Updated: </span><span style="color:#d08770;">{}</span><span>&quot;, doc.title),
</span><span>        ..doc  </span><span style="color:#a7adba;">// Move content, copy numbers
</span><span>    }
</span><span>}
</span></code></pre>
<h3 id="2-use-with-default-for-configuration">2. Use with Default for Configuration</h3>
<p>Leverage the Default trait for clean configuration patterns:</p>
<pre data-lang="rust" style="background-color:#eff1f5;color:#4f5b66;" class="language-rust "><code class="language-rust" data-lang="rust"><span>#[</span><span style="color:#bf616a;">derive</span><span>(Debug, Default)]
</span><span style="color:#b48ead;">struct </span><span>ApiConfig {
</span><span>    </span><span style="color:#bf616a;">base_url</span><span>: String,
</span><span>    </span><span style="color:#bf616a;">api_key</span><span>: String,
</span><span>    </span><span style="color:#bf616a;">timeout</span><span>: </span><span style="color:#b48ead;">u64</span><span>,
</span><span>    </span><span style="color:#bf616a;">retries</span><span>: </span><span style="color:#b48ead;">u32</span><span>,
</span><span>    </span><span style="color:#bf616a;">rate_limit</span><span>: </span><span style="color:#b48ead;">u32</span><span>,
</span><span>}
</span><span>
</span><span style="color:#b48ead;">fn </span><span style="color:#8fa1b3;">create_config</span><span>(</span><span style="color:#bf616a;">api_key</span><span>: String) -&gt; ApiConfig {
</span><span>    ApiConfig {
</span><span>        base_url: String::from(&quot;</span><span style="color:#a3be8c;">https://api.example.com</span><span>&quot;),
</span><span>        api_key,
</span><span>        timeout: </span><span style="color:#d08770;">30</span><span>,
</span><span>        ..Default::default()  </span><span style="color:#a7adba;">// Use defaults for retries and rate_limit
</span><span>    }
</span><span>}
</span></code></pre>
<h3 id="3-document-ownership-transfer">3. Document Ownership Transfer</h3>
<p>Make ownership implications clear in documentation:</p>
<pre data-lang="rust" style="background-color:#eff1f5;color:#4f5b66;" class="language-rust "><code class="language-rust" data-lang="rust"><span style="color:#b48ead;">impl </span><span>User {
</span><span>    </span><span style="color:#a7adba;">/// Creates a new user based on an existing user, updating the email.
</span><span>    </span><span style="color:#a7adba;">///
</span><span>    </span><span style="color:#a7adba;">/// # Ownership
</span><span>    </span><span style="color:#a7adba;">/// This function takes ownership of `base_user` and returns a new User.
</span><span>    </span><span style="color:#a7adba;">/// The original `base_user` cannot be used after this call.
</span><span>    </span><span style="color:#b48ead;">pub fn </span><span style="color:#8fa1b3;">with_new_email</span><span>(</span><span style="color:#bf616a;">base_user</span><span>: User, </span><span style="color:#bf616a;">new_email</span><span>: String) -&gt; User {
</span><span>        User {
</span><span>            email: new_email,
</span><span>            ..base_user
</span><span>        }
</span><span>    }
</span><span>}
</span></code></pre>
<h3 id="4-consider-clone-when-you-need-the-original">4. Consider Clone When You Need the Original</h3>
<pre data-lang="rust" style="background-color:#eff1f5;color:#4f5b66;" class="language-rust "><code class="language-rust" data-lang="rust"><span style="color:#b48ead;">fn </span><span style="color:#8fa1b3;">update_preserving_original</span><span>(</span><span style="color:#bf616a;">user</span><span>: &amp;User) -&gt; User {
</span><span>    User {
</span><span>        email: String::from(&quot;</span><span style="color:#a3be8c;">updated@example.com</span><span>&quot;),
</span><span>        ..user.</span><span style="color:#96b5b4;">clone</span><span>()  </span><span style="color:#a7adba;">// Clone to preserve original
</span><span>    }
</span><span>}
</span></code></pre>
<h2 id="summary-and-key-points">Summary and Key Points</h2>
<h3 id="essential-characteristics"><strong>Essential Characteristics</strong></h3>
<p><strong>Struct update syntax</strong> provides:</p>
<ul>
<li><strong>Concise creation</strong> of struct variants with minimal field changes</li>
<li><strong>Zero-cost abstraction</strong> that compiles to explicit field assignment</li>
<li><strong>Ownership transfer</strong> of non-Copy fields from source to destination</li>
<li><strong>Integration with Default trait</strong> for elegant configuration patterns</li>
</ul>
<h3 id="key-rules"><strong>Key Rules</strong></h3>
<ul>
<li>The <code>..source</code> expression <strong>must come last</strong> in the struct literal[1]</li>
<li><strong>Non-Copy fields are moved</strong> from source to destination</li>
<li><strong>Copy fields are copied</strong> and source remains valid for those fields</li>
<li><strong>All fields must be visible</strong> at the update location[2]</li>
<li>Source struct becomes <strong>partially or fully unusable</strong> after update</li>
</ul>
<h3 id="best-use-cases"><strong>Best Use Cases</strong></h3>
<pre data-lang="rust" style="background-color:#eff1f5;color:#4f5b66;" class="language-rust "><code class="language-rust" data-lang="rust"><span style="color:#a7adba;">// Configuration with defaults
</span><span style="color:#b48ead;">let</span><span> config = Config {
</span><span>    host: &quot;</span><span style="color:#a3be8c;">production.com</span><span>&quot;.</span><span style="color:#96b5b4;">to_string</span><span>(),
</span><span>    ..Default::default()
</span><span>};
</span><span>
</span><span style="color:#a7adba;">// State transitions
</span><span style="color:#b48ead;">let</span><span> connected = Connection {
</span><span>    state: Connected,
</span><span>    ..disconnected_conn
</span><span>};
</span><span>
</span><span style="color:#a7adba;">// Template-based creation
</span><span style="color:#b48ead;">let</span><span> prod_config = Config {
</span><span>    environment: &quot;</span><span style="color:#a3be8c;">production</span><span>&quot;.</span><span style="color:#96b5b4;">to_string</span><span>(),
</span><span>    ..dev_template
</span><span>};
</span></code></pre>
<p>Struct update syntax is a powerful feature that makes Rust code more concise and expressive while maintaining the language's strict ownership guarantees. Understanding its ownership implications is crucial for using it effectively and avoiding common pitfalls related to moved values.</p>
<ol>
<li>https://doc.rust-lang.org/book/ch05-01-defining-structs.html</li>
<li>https://doc.rust-lang.org/reference/expressions/struct-expr.html</li>
<li>https://www.linkedin.com/pulse/embracing-struct-update-syntax-rust-structs-default-traits-ali-%E6%9D%8E%E6%96%AF%E8%B3%A6</li>
<li>https://zerotomastery.io/blog/rust-struct-guide/</li>
<li>https://rust-lang.github.io/rfcs/2528-type-changing-struct-update-syntax.html</li>
<li>https://users.rust-lang.org/t/the-struct-update-syntax/16519</li>
<li>https://www.reddit.com/r/rust/comments/pchp8h/media_struct_update_syntax_in_rust/</li>
<li>https://users.rust-lang.org/t/why-the-struct-update-syntax-is-confusing/105305</li>
<li>https://github.com/rust-lang/book/issues/1996</li>
<li>https://www.rustfinity.com/learn/rust/structs/structs-and-ownership</li>
<li>https://web.mit.edu/rust-lang_v1.25/arch/amd64_ubuntu1404/share/doc/rust/html/book/first-edition/structs.html</li>
<li>https://www.reddit.com/r/rust/comments/tf9xv4/question_about_struct_ownership/</li>
<li>https://dev.to/ajtech0001/mastering-structs-in-rust-from-basic-data-organization-to-method-implementation-11ol</li>
<li>https://shift.click/blog/non-exhaustive-fru-sad/</li>
<li>https://doc.rust-lang.org/book/ch04-01-what-is-ownership.html</li>
<li>https://stackoverflow.com/questions/73221584/how-to-use-struct-update-syntax-with-immutable-borrow</li>
<li>https://stackoverflow.com/questions/65381955/rust-struct-update-syntax-without-taking-ownership</li>
<li>https://educatedguesswork.org/posts/memory-management-4/</li>
<li>https://doc.rust-lang.org/book/ch04-00-understanding-ownership.html</li>
<li>https://google.github.io/comprehensive-rust/std-traits/default.html</li>
<li>https://web.mit.edu/rust-lang_v1.25/arch/amd64_ubuntu1404/share/doc/rust/html/book/second-edition/ch05-01-defining-structs.html</li>
<li>https://www.linkedin.com/learning/rust-essential-training/struct-update-syntax</li>
</ol>

    
        </div>

    </article>
</main>


    <script type="text/javascript" src="http://localhost/elasticlunr.min.js" defer></script>
    <script type="text/javascript" src="http://localhost/search_index.en.js" defer></script>
<script type="text/javascript" src="http://localhost/js.js" defer></script>

</body>
</html>
